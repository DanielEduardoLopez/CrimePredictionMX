-- Database creation
DROP SCHEMA IF EXISTS PSDB;
CREATE SCHEMA PSDB;

-- Use of the database
USE PSDB;

-- Tables

-- TVivienda Table
DROP TABLE IF EXISTS TVivienda;
CREATE TABLE
TVivienda(
ID_VIV VARCHAR(10),
UPM INT(7),
VIV_SEL INT(2),
AREAM INT(2),
CVE_ENT INT(2),
NOM_ENT VARCHAR(250),
CVE_MUN INT(3),
NOM_MUN VARCHAR(250),
RESULT_V INT(2),
AP1_1 INT(1),
AP1_2 INT(1),
AP2_1 INT(1),
AP2_2 INT(1),
AP2_3 INT(2),
NAP2_3 INT(2),
FAC_VIV INT(6),
FAC_VIV_AM INT(6),
DOMINIO VARCHAR(1),
EST_DIS INT(3),
UPM_DIS INT(5),
PRIMARY KEY (ID_VIV)
);

-- THogar Table
DROP TABLE IF EXISTS THogar;
CREATE TABLE
THogar(
ID_VIV CHAR(10),
ID_HOG CHAR(13),
UPM INT(7),
VIV_SEL INT(2),
HOGAR INT(2),
RESUL_H CHAR(1),
N_INF INT(2),
R_SEL  INT(2),
CVE_ENT INT(2),
NOM_ENT VARCHAR(250),
CVE_MUN INT(3),
NOM_MUN VARCHAR(250),
TOT_PER INT(2),
FAC_HOG INT(6),
FAC_HOG_AM INT(6),
DOMINIO CHAR(1),
EST_DIS INT(3),
UPM_DIS INT(5),
PRIMARY KEY (ID_HOG),
FOREIGN KEY (ID_VIV) REFERENCES TVivienda(ID_VIV)
ON UPDATE CASCADE ON DELETE RESTRICT
);


-- TSDem Table
DROP TABLE IF EXISTS TSDem;
CREATE TABLE
TSDem(
ID_VIV VARCHAR(10),
ID_HOG VARCHAR(13),
ID_PER VARCHAR(16),
UPM INT(7),
VIV_SEL INT(2),
HOGAR INT(2),
RESUL_H VARCHAR(1),
N_REN INT(2),
PAREN INT(1),
SEXO INT(1),
EDAD INT(2),
CODIGO INT(1),
NIV INT(2),
GRA INT(1),
CVE_ENT INT(2),
NOM_ENT VARCHAR(250),
CVE_MUN INT(3),
NOM_MUN VARCHAR(250),
AP3_8 INT(1),
AP3_9 INT(1),
AP3_10 INT(1),
FAC_HOG INT(6),
FAC_HOG_AM INT(6),
DOMINIO VARCHAR(1),
EST_DIS INT(3),
UPM_DIS INT(5),
PRIMARY KEY (ID_PER),
FOREIGN KEY (ID_HOG) REFERENCES THogar(ID_HOG)
ON UPDATE CASCADE ON DELETE RESTRICT,
FOREIGN KEY (ID_VIV) REFERENCES TVivienda(ID_VIV)
ON UPDATE CASCADE ON DELETE RESTRICT
);

-- TMod_Vic Table
DROP TABLE IF EXISTS TMod_Vic;
CREATE TABLE
TMod_Vic(
ID_VIV CHAR(10),
ID_HOG CHAR(13),
ID_PER CHAR(16),
ID_DEL CHAR(21),
UPM INT(7),
VIV_SEL INT(2),
HOGAR INT(2),
ND_TIPO INT(1),
TD_TIPO INT(1),
BPCOD INT(2),
RESUL_H CHAR(1),
R_SEL  INT(2),
SEXO INT(1),
EDAD INT(2),
AREAM_OCU INT(2),
BP1_1 INT(2),
BP1_2C INT(2),
BP1_3C INT(3),
BP1_4 INT(1),
BP1_5 INT(1),
BP1_6 INT(1),
BP1_7 INT(1),
BP1_8 INT(1),
BP1_9 INT(1),
BP1_10_1 INT(1),
BP1_10_2 INT(1),
BP1_10_9 INT(1),
BP1_11 INT(1),
BP1_12_1 INT(1),
BP1_12_2 INT(1),
BP1_12_3 INT(1),
BP1_12_4 INT(1),
BP1_12_5 INT(1),
BP1_12_9 INT(1),
BP1_13 INT(1),
BP1_14_1 INT(1),
BP1_14_2 INT(1),
BP1_14_3 INT(1),
BP1_14_4 INT(1),
BP1_14_9 INT(1),
BP1_15 INT(1),
BP1_16_1 INT(1),
BP1_16_2 INT(1),
BP1_16_3 INT(1),
BP1_16_4 INT(1),
BP1_16_9 INT(1),
BP1_17 INT(1),
BP1_18 INT(1),
BP1_19_1 INT(1),
BP1_19_2 INT(1),
BP1_19_3 INT(1),
BP1_19_4 INT(1),
BP1_19_5 INT(1),
BP1_19_6 INT(1),
BP1_19_7 INT(1),
BP1_19_8 INT(1),
BP1_20 INT(1),
BP1_21 INT(1),
BP1_22 INT(1),
BP1_23 INT(2),
BP1_24 INT(1),
BP1_25 INT(1),
BP1_26 INT(1),
BP1_27 INT(1),
BP1_28 INT(1),
BP1_29 INT(1),
BP1_30 INT(1),
BP1_31_01 INT(1),
BP1_31_02 INT(1),
BP1_31_03 INT(1),
BP1_31_04 INT(1),
BP1_31_05 INT(1),
BP1_31_06 INT(1),
BP1_31_07 INT(1),
BP1_31_08 INT(1),
BP1_31_99 INT(1),
BP1_32_1 INT(1),
BP1_32_2 INT(1),
BP1_32_3 INT(1),
BP1_32_4 INT(1),
BP1_32_5 INT(1),
BP1_32_9 INT(1),
BP1_33 INT(1),
BP1_34 INT(7),
BP1_35 INT(7),
BP1_36_01 INT(1),
BP1_36_02 INT(1),
BP1_36_03 INT(1),
BP1_36_04 INT(1),
BP1_36_05 INT(1),
BP1_36_06 INT(1),
BP1_36_07 INT(1),
BP1_36_08 INT(1),
BP1_36_09 INT(1),
BP1_36_10 INT(1),
BP1_36_11 INT(1),
BP1_36_99 INT(1),
BP2_1 INT(1),
BP3_1_01 INT(1),
BP3_1_02 INT(1),
BP3_1_03 INT(1),
BP3_1_04 INT(1),
BP3_1_05 INT(1),
BP3_1_06 INT(1),
BP3_1_07 INT(1),
BP3_1_08 INT(1),
BP3_1_09 INT(1),
BP3_1_10 INT(1),
BP3_1_11 INT(1),
BP3_1_12 INT(1),
BP3_1_99 INT(1),
BP3_2 INT(1),
BP4_1 INT(1),
BP5_1 INT(1),
BP5_2_1 INT(1),
BP5_2_2 INT(1),
BP5_2_3 INT(1),
BP5_2_4 INT(1),
BP5_3 INT(1),
BP6_1 INT(1),
BP6_2 INT(1),
BP6_3 INT(1),
BP7_1 INT(1),
FAC_DEL INT(6),
FAC_DEL_AM INT(6),
DOMINIO CHAR(1),
ESTRATO INT(1),
EST_DIS INT(3),
UPM_DIS INT(5),
PRIMARY KEY (ID_DEL),
FOREIGN KEY (ID_HOG) REFERENCES THogar(ID_HOG)
ON UPDATE CASCADE ON DELETE RESTRICT,
FOREIGN KEY (ID_VIV) REFERENCES TVivienda(ID_VIV)
ON UPDATE CASCADE ON DELETE RESTRICT,
FOREIGN KEY (ID_PER) REFERENCES TSDem(ID_PER)
ON UPDATE CASCADE ON DELETE RESTRICT
);

-- TPer_Vic1 Table
DROP TABLE IF EXISTS TPer_Vic1;
CREATE TABLE
TPer_Vic1(
ID_VIV CHAR(10),
ID_HOG CHAR(13),
ID_PER CHAR(16),
UPM INT(7),
VIV_SEL INT(2),
HOGAR INT(2),
RESUL_H CHAR(1),
SEXO INT(1),
EDAD INT(2),
AREAM INT(2),
CVE_ENT INT(2),
NOM_ENT VARCHAR(250),
CVE_MUN INT(3),
NOM_MUN VARCHAR(250),
AP4_1 INT(1),
AP4_2_01 INT(1),
AP4_2_02 INT(1),
AP4_2_03 INT(1),
AP4_2_04 INT(1),
AP4_2_05 INT(1),
AP4_2_06 INT(1),
AP4_2_07 INT(1),
AP4_2_08 INT(1),
AP4_2_09 INT(1),
AP4_2_10 INT(1),
AP4_2_11 INT(1),
AP4_2_12 INT(1),
AP4_2_13 INT(1),
AP4_2_99 INT(1),
AP4_3_1 INT(1),
AP4_3_2 INT(1),
AP4_3_3 INT(1),
AP4_4_01 INT(1),
AP4_4_02 INT(1),
AP4_4_03 INT(1),
AP4_4_04 INT(1),
AP4_4_05 INT(1),
AP4_4_06 INT(1),
AP4_4_07 INT(1),
AP4_4_08 INT(1),
AP4_4_09 INT(1),
AP4_4_10 INT(1),
AP4_4_11 INT(1),
AP4_4_12 INT(1),
AP4_4_A INT(1),
AP4_5_01 INT(1),
AP4_5_02 INT(1),
AP4_5_03 INT(1),
AP4_5_04 INT(1),
AP4_5_05 INT(1),
AP4_5_06 INT(1),
AP4_5_07 INT(1),
AP4_5_08 INT(1),
AP4_5_09 INT(1),
AP4_5_10 INT(1),
AP4_5_11 INT(1),
AP4_5_12 INT(1),
AP4_5_13 INT(1),
AP4_5_14 INT(1),
AP4_5_15 INT(1),
AP4_5_16 INT(1),
AP4_5_17 INT(1),
AP4_5_18 INT(1),
AP4_5_99 INT(1),
AP4_6_1 INT(1),
AP4_6_2 INT(1),
AP4_6_3 INT(1),
AP4_7_1 INT(1),
AP4_7_2 INT(1),
AP4_7_3 INT(1),
AP4_8_1 INT(1),
AP4_9_1 INT(1),
AP4_8_2 INT(1),
AP4_9_2 INT(1),
AP4_8_3 INT(1),
AP4_9_3 INT(1),
AP4_8_4 INT(1),
AP4_9_4 INT(1),
AP4_8_5 INT(1),
AP4_9_5 INT(1),
AP4_8_6 INT(1),
AP4_9_6 INT(1),
AP4_10_01 INT(1),
AP4_10_02 INT(1),
AP4_10_03 INT(1),
AP4_10_04 INT(1),
AP4_10_05 INT(1),
AP4_10_06 INT(1),
AP4_10_07 INT(1),
AP4_10_08 INT(1),
AP4_10_09 INT(1),
AP4_10_10 INT(1),
AP4_10_11 INT(1),
AP4_10_12 INT(1),
AP4_10_13 INT(1),
AP4_10_14 INT(1),
AP4_10_15 INT(1),
AP4_10_16 INT(1),
AP4_11_01 INT(1),
AP4_11_02 INT(1),
AP4_11_03 INT(1),
AP4_11_04 INT(1),
AP4_11_05 INT(1),
AP4_11_06 INT(1),
AP4_11_07 INT(1),
AP4_11_08 INT(1),
AP4_11_09 INT(1),
AP4_11_10 INT(1),
AP4_11_11 INT(1),
AP4_12 INT(7),
AP5_1_01 INT(1),
AP5_1_02 INT(1),
AP5_1_03 INT(1),
AP5_1_04 INT(1),
AP5_1_05 INT(1),
AP5_1_06 INT(1),
AP5_1_07 INT(1),
AP5_1_08 INT(1),
AP5_1_09 INT(1),
AP5_1_10 INT(1),
AP5_1_11 INT(1),
AP5_1_12 INT(1),
AP5_1_13 INT(1),
AP5_2_1 INT(1),
AP5_2_2 INT(1),
AP5_2_3 INT(1),
AP5_2_4 INT(1),
AP5_3_01 INT(1),
AP5_4_01 INT(1),
AP5_5_01 INT(1),
AP5_6_01 INT(1),
AP5_7_1 INT(1),
AP5_3_02 INT(1),
AP5_4_02 INT(1),
AP5_5_02 INT(1),
AP5_6_02 INT(1),
AP5_7_2 INT(1),
AP5_3_03 INT(1),
AP5_4_03 INT(1),
AP5_5_03 INT(1),
AP5_6_03 INT(1),
AP5_7_3 INT(1),
AP5_3_04 INT(1),
AP5_4_04 INT(1),
AP5_5_04 INT(1),
AP5_6_04 INT(1),
AP5_7_4 INT(1),
AP5_3_05 INT(1),
AP5_4_05 INT(1),
AP5_5_05 INT(1),
AP5_6_05 INT(1),
AP5_3_06 INT(1),
AP5_4_06 INT(1),
AP5_5_06 INT(1),
AP5_6_06 INT(1),
AP5_3_07 INT(1),
AP5_4_07 INT(1),
AP5_5_07 INT(1),
AP5_6_07 INT(1),
AP5_3_08 INT(1),
AP5_4_08 INT(1),
AP5_5_08 INT(1),
AP5_6_08 INT(1),
AP5_3_09 INT(1),
AP5_4_09 INT(1),
AP5_5_09 INT(1),
AP5_6_09 INT(1),
AP5_3_10 INT(1),
AP5_4_10 INT(1),
AP5_5_10 INT(1),
AP5_6_10 INT(1),
AP5_8 INT(1),
FAC_HOG INT(6),
FAC_ELE INT(6),
FAC_HOG_AM INT(6),
FAC_ELE_AM INT(6),
DOMINIO CHAR(1),
ESTRATO INT(1),
EST_DIS INT(3),
UPM_DIS INT(5),
FOREIGN KEY (ID_PER) REFERENCES TSDem(ID_PER)
ON UPDATE CASCADE ON DELETE RESTRICT,
FOREIGN KEY (ID_HOG) REFERENCES THogar(ID_HOG)
ON UPDATE CASCADE ON DELETE RESTRICT,
FOREIGN KEY (ID_VIV) REFERENCES TVivienda(ID_VIV)
ON UPDATE CASCADE ON DELETE RESTRICT
);

-- TPer_Vic2 Table
DROP TABLE IF EXISTS TPer_Vic2;
CREATE TABLE
TPer_Vic2(
ID_VIV CHAR(10),
ID_HOG CHAR(13),
ID_PER CHAR(16),
UPM INT(7),
VIV_SEL INT(2),
HOGAR INT(2),
RESUL_H CHAR(1),
R_SEL INT(2),
SEXO INT(1),
EDAD INT(2),
AREAM INT(2),
CVE_ENT INT(2),
NOM_ENT VARCHAR(250),
CVE_MUN INT(3),
NOM_MUN VARCHAR(250),
AP6_1_1 INT(1),
AP6_1_2 INT(2),
AP6_2 INT(1),
AP6_3 INT(1),
AP6_4_01 INT(1),
AP6_5_01 INT(1),
AP6_6_01 INT(2),
AP6_4_02 INT(1),
AP6_5_02 INT(1),
AP6_6_02 INT(2),
AP6_4_03 INT(1),
AP6_6_03 INT(2),
AP6_4_04 INT(1),
AP6_6_04 INT(2),
AP6_7 INT(1),
AP6_8 INT(1),
AP6_9 INT(1),
AP6_10_1 INT(1),
AP6_10_2 INT(2),
AP6_11_1 INT(1),
AP6_12_1 INT(1),
AP6_13_1_1 INT(1),
AP6_13_1_2 INT(1),
AP6_13_1_3 INT(1),
AP6_13_1_4 INT(1),
AP6_11_2 INT(1),
AP6_12_2 INT(1),
AP6_13_2_1 INT(1),
AP6_13_2_2 INT(1),
AP6_13_2_3 INT(1),
AP6_13_2_4 INT(1),
AP6_11_3 INT(1),
AP6_12_3 INT(1),
AP6_13_3_1 INT(1),
AP6_13_3_2 INT(1),
AP6_13_3_3 INT(1),
AP6_13_3_4 INT(1),
AP6_11_4 INT(1),
AP6_12_4 INT(1),
AP6_13_4_1 INT(1),
AP6_13_4_2 INT(1),
AP6_13_4_3 INT(1),
AP6_13_4_4 INT(1),
AP6_11_5 INT(1),
AP6_12_5 INT(1),
AP6_13_5_1 INT(1),
AP6_13_5_2 INT(1),
AP6_13_5_3 INT(1),
AP6_13_5_4 INT(1),
AP6_11_6 INT(1),
AP6_12_6 INT(1),
AP6_13_6_1 INT(1),
AP6_13_6_2 INT(1),
AP6_13_6_3 INT(1),
AP6_13_6_4 INT(1),
AP6_11_7 INT(1),
AP6_12_7 INT(1),
AP6_13_7_1 INT(1),
AP6_13_7_2 INT(1),
AP6_13_7_3 INT(1),
AP6_13_7_4 INT(1),
AP6_14 INT(1),
AP6_15_1 INT(1),
AP6_15_2 INT(2),
AP6_16_1 INT(1),
AP6_17_1 INT(1),
AP6_18_1 INT(1),
AP6_16_2 INT(1),
AP6_17_2 INT(1),
AP6_18_2 INT(1),
AP6_16_3 INT(1),
AP6_17_3 INT(1),
AP6_18_3 INT(1),
AP6_16_4 INT(1),
AP6_17_4 INT(1),
AP6_18_4 INT(1),
AP6_16_5 INT(1),
AP6_17_5 INT(1),
AP6_18_5 INT(1),
AP6_16_6 INT(1),
AP6_17_6 INT(1),
AP6_18_6 INT(1),
AP6_16_7 INT(1),
AP6_17_7 INT(1),
AP6_18_7 INT(1),
AP6_19 INT(1),
AP6_20_1 INT(1),
AP6_20_2 INT(2),
AP6_21_1 INT(1),
AP6_22_1 INT(1),
AP6_21_2 INT(1),
AP6_22_2 INT(1),
AP6_21_3 INT(1),
AP6_22_3 INT(1),
AP6_21_4 INT(1),
AP6_22_4 INT(1),
AP6_21_5 INT(1),
AP6_22_5 INT(1),
AP6_21_6 INT(1),
AP6_22_6 INT(1),
AP6_21_7 INT(1),
AP6_22_7 INT(1),
AP7_1 INT(1),
AP7_2 INT(1),
AP7_3_05 INT(1),
AP7_4_05 INT(2),
AP7_3_06 INT(1),
AP7_4_06 INT(2),
AP7_3_07 INT(1),
AP7_4_07 INT(2),
AP7_3_08 INT(1),
AP7_4_08 INT(2),
AP7_3_09 INT(1),
AP7_4_09 INT(2),
AP7_3_10 INT(1),
AP7_4_10 INT(2),
AP7_3_11 INT(1),
AP7_4_11 INT(2),
AP7_3_12 INT(1),
AP7_4_12 INT(2),
AP7_3_13 INT(1),
AP7_4_13 INT(2),
AP7_3_14 INT(1),
AP7_4_14 INT(2),
AP7_3_15 INT(1),
AP7_4_15 INT(2),
FAC_HOG INT(6),
FAC_ELE INT(6),
FAC_HOG_AM INT(6),
FAC_ELE_AM INT(6),
DOMINIO CHAR(1),
ESTRATO INT(1),
EST_DIS INT(3),
UPM_DIS INT(5),
FOREIGN KEY (ID_PER) REFERENCES TSDem(ID_PER)
ON UPDATE CASCADE ON DELETE RESTRICT,
FOREIGN KEY (ID_HOG) REFERENCES THogar(ID_HOG)
ON UPDATE CASCADE ON DELETE RESTRICT,
FOREIGN KEY (ID_VIV) REFERENCES TVivienda(ID_VIV)
ON UPDATE CASCADE ON DELETE RESTRICT
);


-- Importing data into the TVivienda Table
LOAD DATA LOCAL INFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/adj_conjunto_de_datos_TVivienda_ENVIPE_2022.csv'
INTO TABLE psdb.tvivienda FIELDS TERMINATED BY ','
ENCLOSED BY '"' LINES TERMINATED BY '\n'
IGNORE 1 LINES;

-- Importing data into the THogar Table
LOAD DATA LOCAL INFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/adj_conjunto_de_datos_THogar_ENVIPE_2022.csv'
INTO TABLE psdb.thogar FIELDS TERMINATED BY ','
ENCLOSED BY '"' LINES TERMINATED BY '\n'
IGNORE 1 LINES;

-- Importing data into the TSDem Table
LOAD DATA LOCAL INFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/adj_conjunto_de_datos_TSDem_ENVIPE_2022.csv'
INTO TABLE psdb.tsdem FIELDS TERMINATED BY ','
ENCLOSED BY '"' LINES TERMINATED BY '\n'
IGNORE 1 LINES;

-- Importing data into the TMod_Vic Table
LOAD DATA LOCAL INFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/adj_conjunto_de_datos_TMod_Vic_ENVIPE_2022.csv'
INTO TABLE psdb.tmod_vic FIELDS TERMINATED BY ','
ENCLOSED BY '"' LINES TERMINATED BY '\n'
IGNORE 1 LINES;

-- Importing data into the TPer_Vic1 Table
LOAD DATA LOCAL INFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/adj_conjunto_de_datos_TPer_Vic1_ENVIPE_2022.csv'
INTO TABLE psdb.tper_vic1 FIELDS TERMINATED BY ','
ENCLOSED BY '"' LINES TERMINATED BY '\n'
IGNORE 1 LINES;

-- Importing data into the TPer_Vic2 Table
LOAD DATA LOCAL INFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/adj_conjunto_de_datos_TPer_Vic2_ENVIPE_2022.csv'
INTO TABLE psdb.tper_vic2 FIELDS TERMINATED BY ','
ENCLOSED BY '"' LINES TERMINATED BY '\n'
IGNORE 1 LINES;

